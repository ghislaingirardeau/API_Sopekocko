test id 
ghislain67@test.com
qwertyuio

testuser1@mail.com
qwerty

admin
"email":"admin@mail.com", "password": "admin"

exports.signup = (req, res, next) => {
    bcrypt.hash(req.body.password, salt)
    .then(hash => {
        const utilisateur = new User ({ 
            email: req.body.email,
            password: hash
        })
        console.log(utilisateur.email)
        var ciphertext = CryptoJS.AES.encrypt(utilisateur.email, 'secret key 123').toString();
        utilisateur.email = ciphertext
        utilisateur.save()
        .then(() => res.status(201).json({ message: 'Utilisateur créé'}))
        .catch(() => res.status(401).json({message: "Cet email est deja utilisé"}))

    })
    .catch(() => res.status(400).json({message: 'Echec'}))
}




User.find()
    .then((users) => {
        for (let i=0; i < users.length; i++) {

            var bytes  = CryptoJS.AES.decrypt(users[i].email, 'secret key 123');
            var originalText = bytes.toString(CryptoJS.enc.Utf8);
            
            if (originalText === req.body.email) {
                console.log('trouver')
            }
            
        }
       
    })